name: freshrss
services:
  freshrss:
    image: lscr.io/linuxserver/freshrss:1.27.0-ls279@sha256:45dad71857da47a3e589dd0f66746c8ef4c845c5b3ec96fee4e130d1568ea7db
    container_name: freshrss
    volumes:
      - ${CONFIG_DIR}/freshrss/config.php:/config/www/freshrss/data/config.php:ro
      - ${DATA_DIR}/freshrss:/config
      - ${LOG_DIR}/freshrss:/config/log
    environment:
      - PUID
      - PGID
      - TZ
    networks:
      - freshrss-web
    restart: unless-stopped
    labels:
      readme.description: Self-hosted RSS feed aggregator.
      readme.links.github: https://github.com/FreshRSS/FreshRSS
      traefik.docker.network: freshrss-web
      traefik.enable: true
      traefik.http.routers.freshrss-api.entrypoints: https
      traefik.http.routers.freshrss-api.priority: 99
      traefik.http.routers.freshrss-api.rule: Host(`rss.${HOST}`) && PathPrefix(`/api`)
      traefik.http.routers.freshrss.entrypoints: https
      traefik.http.routers.freshrss.middlewares: authelia
      traefik.http.routers.freshrss.priority: 1
      traefik.http.routers.freshrss.rule: Host(`rss.${HOST}`)
      glance.name: FreshRSS
      glance.icon: di:freshrss
      glance.url: https://rss.${HOST}
      glance.description: RSS Aggregator
      glance.category: media
    tmpfs:
      - /config/www/freshrss/data/cache:rw,mode=1777
networks:
  freshrss-web:
    name: freshrss-web
