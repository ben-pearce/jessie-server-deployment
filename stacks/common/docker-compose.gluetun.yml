name: gluetun
services:
  gluetun:
    container_name: gluetun
    image: qmcgaw/gluetun:v3.40.0@sha256:2b42bfa046757145a5155acece417b65b4443c8033fb88661a8e9dcf7fda5a00
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
    secrets:
      - gluetun_wireguard_addresses
      - gluetun_wireguard_preshared_key
      - gluetun_wireguard_private_key
    networks:
      - gluetun
      - gluetun-web
    environment:
      - VPN_SERVICE_PROVIDER=airvpn
      - VPN_TYPE=wireguard
      - WIREGUARD_PRIVATE_KEY_SECRETFILE=/run/secrets/gluetun_wireguard_private_key
      - WIREGUARD_PRESHARED_KEY_SECRETFILE=/run/secrets/gluetun_wireguard_preshared_key
      - WIREGUARD_ADDRESSES_SECRETFILE=/run/secrets/gluetun_wireguard_addresses
      - SERVER_COUNTRIES=United Kingdom
      - TZ
    labels:
      readme.description: Lightweight swiss-army-knife-like VPN client.
      readme.links.docker: https://github.com/qdm12/gluetun
networks:
  gluetun:
    name: gluetun
  gluetun-web:
    name: gluetun-web
secrets:
  gluetun_wireguard_addresses:
    file: ../../.secrets/gluetun_wireguard_addresses
  gluetun_wireguard_preshared_key:
    file: ../../.secrets/gluetun_wireguard_preshared_key
  gluetun_wireguard_private_key:
    file: ../../.secrets/gluetun_wireguard_private_key
