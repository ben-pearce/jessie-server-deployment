name: gluetun
services:
  gluetun:
    image: qmcgaw/gluetun:v3.41.1@sha256:1a5bf4b4820a879cdf8d93d7ef0d2d963af56670c9ebff8981860b6804ebc8ab
    container_name: gluetun
    secrets:
      - gluetun_wireguard_addresses
      - gluetun_wireguard_preshared_key
      - gluetun_wireguard_private_key
    environment:
      - VPN_SERVICE_PROVIDER=airvpn
      - VPN_TYPE=wireguard
      - WIREGUARD_PRIVATE_KEY_SECRETFILE=/run/secrets/gluetun_wireguard_private_key
      - WIREGUARD_PRESHARED_KEY_SECRETFILE=/run/secrets/gluetun_wireguard_preshared_key
      - WIREGUARD_ADDRESSES_SECRETFILE=/run/secrets/gluetun_wireguard_addresses
      - SERVER_COUNTRIES=United Kingdom
      - TZ
    networks:
      - gluetun
      - gluetun-web
    restart: unless-stopped
    labels:
      readme.description: Lightweight swiss-army-knife-like VPN client.
      readme.links.docker: https://github.com/qdm12/gluetun
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
networks:
  gluetun:
    name: gluetun
  gluetun-web:
    name: gluetun-web
secrets:
  gluetun_wireguard_addresses:
    file: ../../.secrets/gluetun_wireguard_addresses
  gluetun_wireguard_preshared_key:
    file: ../../.secrets/gluetun_wireguard_preshared_key
  gluetun_wireguard_private_key:
    file: ../../.secrets/gluetun_wireguard_private_key
